{% extends "main_app/base.html" %}

{% block content %}
<h2 class="mb-4">Каталог товаров</h2>
<div class="row">
    {% for product in products %}
    <div class="col-md-4 mb-4">
        <div class="card h-100" style="width: 360px;">
<img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.name }}" style="width: 250px; height: 300px; object-fit: contain; display: block; margin: 0 auto;">

    <div class="card-body">
        <h5 class="card-title">{{ product.name }}</h5>
        <p class="card-text">{{ product.description }}</p>
        <div class="d-flex justify-content-between align-items-center mt-3">
            <div>
                <input type="number" value="1" min="1" max="99" class="form-control" style="width: 60px;">
            </div>
            <p class="mb-0"><strong>{{ product.price }} ₽</strong></p>
        </div>
           </div>
</div>

    </div>
    {% endfor %}

</div>

<script>
    // Обновление суммы при изменении количества
    function updateTotal(button) {
        const input = button.parentNode.querySelector('input[name="quantity"]');
        const total = button.parentNode.querySelector('.total-price');
        const price = parseFloat(total.getAttribute('data-price'));
        const quantity = parseInt(input.value);
        total.textContent = (price * quantity).toFixed(2) + " ₽";
    }

    function incrementQuantity(button) {
        let input = button.parentNode.querySelector('input[name="quantity"]');
        input.value = parseInt(input.value) + 1;
        updateTotal(button);
    }

    function decrementQuantity(button) {
        let input = button.parentNode.querySelector('input[name="quantity"]');
        if (parseInt(input.value) > 1) {
            input.value = parseInt(input.value) - 1;
            updateTotal(button);
        }
    }
</script>
{% endblock %}

