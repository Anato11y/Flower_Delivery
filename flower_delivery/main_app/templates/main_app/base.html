<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Доставка цветов</title>
    {% load static %}
    <!-- Подключение Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Кастомные стили -->
    <link rel="stylesheet" href="{% static 'main_app/css/styles.css' %}">
</head>
<body>
    <!-- Шапка -->
    <header class="bg-dark text-light py-3">
        <div class="container d-flex justify-content-between align-items-center">
            <h1 class="h3">Доставка цветов</h1>
            <nav>
                <a href="{% url 'index' %}" class="text-light me-3">Главная</a>
                <a href="{% url 'catalog' %}" class="text-light me-3">Каталог</a>
                <a href="{% url 'checkout' %}" class="text-light me-3">Корзина</a>
                <a href="{% url 'order_history' %}" class="text-light me-3">История заказов</a>
                <a href="{% url 'reviews' %}" class="text-light me-3">Отзывы</a>

                <!-- Условное отображение для авторизованных пользователей -->
                {% if user.is_authenticated %}
                    <a href="{% url 'logout' %}" class="text-light me-3">Выход</a>
                {% else %}
                    <a href="{% url 'login' %}" class="text-light me-3">Вход</a>
                    <a href="{% url 'register' %}" class="text-light">Регистрация</a>
                {% endif %}
            </nav>
        </div>
    </header>

    <!-- Основной контент -->
    <main class="container mt-4">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Футер -->
    <footer class="bg-dark text-light py-3">
        <div class="container text-center">
            <p>&copy; 2024 Доставка цветов. Все права защищены.</p>
            <p>Телефон: +7 123 456 78 90 | Email: info@flowershop.ru</p>
        </div>
    </footer>

    <!-- Подключение Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Подключение Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

<!-- Скрипт для настройки карусели -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const carouselInner = document.querySelector('#carousel-row');
        const items = Array.from(carouselInner.children);
        const itemsPerSlide = 5; // Количество видимых карточек
        let currentIndex = 0;

        // Дублируем карточки для бесшовного сдвига
        items.forEach((item) => {
            const clone = item.cloneNode(true);
            carouselInner.appendChild(clone);
        });

        // Функция для обновления сдвига
        function updateCarousel(direction = 'next') {
            const totalItems = items.length;

            if (direction === 'next') {
                currentIndex++;
            } else {
                currentIndex--;
                if (currentIndex < 0) {
                    currentIndex = totalItems - 1;
                    const offset = -currentIndex * (100 / itemsPerSlide);
                    carouselInner.style.transition = 'none'; // Отключаем анимацию
                    carouselInner.style.transform = `translateX(${offset}%)`;
                    setTimeout(() => {
                        currentIndex--;
                        carouselInner.style.transition = 'transform 0.5s ease-in-out'; // Включаем анимацию
                        const newOffset = -currentIndex * (100 / itemsPerSlide);
                        carouselInner.style.transform = `translateX(${newOffset}%)`;
                    }, 50);
                    return;
                }
            }

            const offset = -currentIndex * (100 / itemsPerSlide);
            carouselInner.style.transform = `translateX(${offset}%)`;

            // Если дошли до конца дублированного списка, возвращаемся к началу
            if (currentIndex >= totalItems) {
                currentIndex = 0;
                setTimeout(() => {
                    carouselInner.style.transition = 'none'; // Отключаем анимацию
                    carouselInner.style.transform = `translateX(0%)`;
                }, 500);
            }
        }

        // Автоматическое переключение
        let autoSlideInterval = setInterval(() => updateCarousel('next'), 3000); // Каждые 3 секунды

        // Навешивание событий на кнопки управления
        document.querySelector('.carousel-control-next').addEventListener('click', () => {
            clearInterval(autoSlideInterval); // Останавливаем автоматическое переключение при ручном управлении
            updateCarousel('next');
        });

        document.querySelector('.carousel-control-prev').addEventListener('click', () => {
            clearInterval(autoSlideInterval); // Останавливаем автоматическое переключение при ручном управлении
            updateCarousel('prev');
        });
    });
</script>



</body>
</html>
